{% extends "base.html" %}
{% block content %}
<h2 style="margin:0 0 16px;color:#22d3ee;text-align:center;">Redeem Your Household Code</h2>

<div class="card" style="
  max-width:560px;margin:0 auto 24px;
  background:#0e1628;border:1px solid #1f2b4a;border-radius:16px;
  padding:24px;text-align:center;
">
  <form method="post" id="redeem-form">
    <label style="display:block;color:#cbd5e1;margin-bottom:8px;text-align:left;">
      Enter your <strong>@mantapnet.com</strong> email:
    </label>
    <input type="email" name="email" required placeholder="example@mantapnet.com"
           style="width:90%;padding:12px 14px;
                  border-radius:10px;border:1px solid #2a344a;
                  background:#0b1320;color:#e5e7eb;
                  margin-bottom:16px;font-size:15px;">

    <button class="btn" type="submit" style="
      width:100%;background:#22d3ee;color:#001017;font-weight:700;
      padding:12px;border-radius:10px;font-size:16px;transition:.25s;">
      Get Code
    </button>

    <div id="loading" style="display:none;color:#94a3b8;margin-top:10px;">
      Checking mailbox…
    </div>
  </form>

  {% if email %}
    <div style="color:#94a3b8;margin-top:10px">Entered: {{ email }}</div>
  {% endif %}
  {% if code %}
    <div style="margin-top:16px;padding:16px;
                border:1px dashed #334155;border-radius:12px;
                background:#0b1327;">
      <div style="color:#93c5fd;font-size:13px;margin-bottom:6px;">Your code</div>
      <div style="font-size:38px;font-weight:800;letter-spacing:.1em;color:#22d3ee;">
        {{ code }}
      </div>
    </div>
  {% elif error %}
    <div style="margin-top:16px;color:#fda4af;">{{ error }}</div>
  {% endif %}
</div>

<div class="card" style="
  max-width:900px;margin:0 auto;
  background:#0e1628;border:1px solid #1f2b4a;border-radius:16px;
  padding:24px;color:#e5e7eb;
">
  <h3 style="margin:0 0 10px;color:#22d3ee;">How to Redeem</h3>
  <ol style="margin:0 0 14px 20px;color:#cbd5e1;">
    <li>On TV: Click <strong>[I'm Travelling / Saya Sedang Mengembara]</strong> → <strong>[Send Email]</strong></li>
    <li>On Phone/PC: Click <strong>[Watch Temporary]</strong> → <strong>[Send Email]</strong></li>
    <li>Enter your <strong>@mantapnet.com</strong> email above.</li>
    <li>Click <strong>Get Code</strong> and wait a few seconds (redeem within 15 minutes).</li>
  </ol>
  <div style="display:flex;gap:20px;flex-wrap:wrap;justify-content:center;margin-top:20px;">
    <img src="/tv.png" alt="TV Screenshot" width="400" style="border-radius:12px;outline:1px solid #1f2b4a;">
    <img src="/fon.png" alt="Phone Screenshot" width="400" style="border-radius:12px;outline:1px solid #1f2b4a;"> 
  </div>
</div>

<script>
  document.getElementById("redeem-form").addEventListener("submit", function(){
    const l = document.getElementById("loading");
    if(l) l.style.display="block";
  });
</script>
{% endblock %}
