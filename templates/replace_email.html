{% extends "base.html" %}
{% block content %}
  <h2 style="margin:0 0 16px;color:#7ef0ff;text-align:center;">Replace Account</h2>

  <div class="card" style="
    max-width:560px;margin:0 auto 20px;
    background:#0e1628;border:1px solid #1f2b4a;border-radius:12px;
    padding:20px;text-align:left;
  ">
    <form method="post" id="replace-form">
      <label style="display:block;color:#cbd5e1;margin-bottom:8px;">
        Enter the email that are given
      </label>
      <input name="email" type="email" placeholder="contoh@mantapnet.com"
             value="{{ email or '' }}"
             required
             style="width:100%;padding:10px 12px;border-radius:8px;border:1px solid #2a344a;
                    background:#0b1320;color:#e5e7eb;margin-bottom:12px;">

      <button class="btn" type="submit" style="width:100%;background:#22d3ee;color:#001017;font-weight:700;padding:10px;border-radius:8px;">Find replacement</button>

            <!-- Inline loading message -->
      <div id="loading" style="display:none;color:#94a3b8;margin-top:10px;">
        Checking secure records…
      </div>
    </form>

    {% if error %}
      <div style="color:#fda4af;margin-top:12px">{{ error }}</div>
    {% endif %}

    {% if result %}
      {% if result.found %}
        <div style="margin-top:16px;padding:12px;border-radius:10px;background:#081323;border:1px solid #14304b;">
          <div style="color:#93c5fd;font-size:13px;margin-bottom:6px;">Replacement found</div>
          <div style="font-size:20px;font-weight:700;color:#7ef0ff;">{{ result.replacement }}</div>
          <div style="font-size:15px;font-weight:700;color:#7ef0ff;">Password: qwe222</div>
          <div style="color:#94a3b8;margin-top:8px;font-size:15px;">Copy and use the replacement account.</div>
          <div style="font-size:15px;font-weight:700;color:#7ef0ff;">If Something Went Wrong,<br> Try:
Clear cookies On Laptop,</div>
          <a href="https://www.netflix.com/clearcookies" target="_blank" class="btn btn-info">Laptop Clear Cookies</a>
          <div style="font-size:15px;font-weight:700;color:#7ef0ff;">, TV and phone reinstall the apps
Restart Wifi Or Try Again in 30 minutes<br><br>

If Password Cannot Sign In,<br> Try Sign in Code
<br>Get the Code<br></div><a href="https://mantapnet.onrender.com/sign-in-code" target="_blank" class="btn btn-info">Sign In Code</a>
<div style="font-size:15px;font-weight:700;color:#7ef0ff;">If you are using Smart Tv,<br> cuba guna qr sign in,<br> contoh utk guna qr sign in</div>
https://youtu.be/fZZ8Is7rQBA
        </div>
      {% else %}
        <div style="margin-top:16px;color:#fbbf24;font-weight:700;">
          Your account appears to be working or no replacement found. Please check with customer service.
        </div>
      {% endif %}
    {% endif %}
  </div>

    <style>
    @keyframes spin { to { transform: rotate(360deg); } }
  </style>

  <script>
    (function () {
      const form = document.getElementById("replace-form");
      const loading = document.getElementById("loading");
      const submitBtn = document.getElementById("replace-submit");
      const btnText = submitBtn.querySelector(".btn-text");
      const spinner = submitBtn.querySelector(".spinner");

      form.addEventListener("submit", function () {
        // show inline loader
        loading.style.display = "block";
        // button loading state
        submitBtn.disabled = true;
        submitBtn.style.opacity = "0.8";
        btnText.textContent = "Finding…";
        spinner.style.display = "inline-block";
      });
    })();
  </script>
{% endblock %}
