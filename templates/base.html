<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <title>{{ title or "Mantapnet" }}</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <style>
    :root { --bg:#0f172a; --card:#111827; --text:#e5e7eb; --muted:#9ca3af; --accent:#22d3ee; }
    body { margin:0; font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial; background:#0b1020; color:var(--text); }
    a { color: var(--accent); text-decoration: none; }
    .container { max-width: 1100px; margin: 0 auto; padding: 16px; }

    /* Top nav */
    .nav {
      position: sticky; top:0; z-index:20;
      background:linear-gradient(90deg,#0b1020,#0d1022);
      border-bottom:1px solid #1f2937;
    }
    .nav-inner {
      display:flex; align-items:center; justify-content:space-between; gap:16px;
    }
    .brand {
      display:flex; align-items:center; gap:10px; font-weight:700;
    }
    .brand-dot {
      width:10px; height:10px; border-radius:999px;
      background:var(--accent); box-shadow:0 0 20px var(--accent);
    }
    .nav-links { display:flex; gap:16px; }

    /* Hero section */
    .hero {
      background: radial-gradient(1200px 400px at 50% -200px, rgba(34,211,238,0.18), transparent 70%);
      padding: 48px 0;
      border-bottom:1px solid #1f2937;
    }
    .hero h1 { font-size: clamp(24px, 4vw, 40px); margin: 0 0 10px; }
    .hero p { color:var(--muted); margin:0; }

    /* Cards */
    .list { display:grid; grid-template-columns: repeat(auto-fill, minmax(240px,1fr)); gap:16px; margin-top:20px; }
    .card { background:#0e162e; border:1px solid #1f2b4a; border-radius:14px; padding:16px; }
    .btn { display:inline-block; background:var(--accent); color:#001017; padding:10px 14px; border-radius:10px; font-weight:600; }
    .card-link { text-decoration:none; color:inherit; }
    .card-link .card { transition: transform .15s, box-shadow .15s; }
    .card-link:hover .card {
      transform: translateY(-3px);
      box-shadow: 0 6px 18px rgba(0,0,0,0.4);
      border-color: var(--accent);
    }
    .nav-links a.new-shopee {
  color: #EE4D2D;
  font-weight: 1200;
    letter-spacing: 0.3px;
}
    .nav-links a.new-shopee:hover {
  color: #ff6a3d;
  text-shadow: 0 0 6px rgba(238, 77, 45, 0.6);
}
      /* ===== Popup (first visit) ===== */
  .popup-overlay{
    position: fixed;
    inset: 0;
    background: rgba(0,0,0,.65);
    display: none;
    align-items: center;
    justify-content: center;
    padding: 18px;
    z-index: 9999;
  }
  .popup-overlay.show{ display:flex; }

  .popup-card{
    width: min(420px, 92vw);
    background:#0e162e;
    border:1px solid #1f2b4a;
    border-radius: 16px;
    box-shadow: 0 18px 60px rgba(0,0,0,.55);
    overflow: hidden;
    position: relative;
  }

  .popup-close{
    position:absolute;
    top:10px;
    right:10px;
    width:36px;
    height:36px;
    border-radius: 12px;
    border:1px solid #243150;
    background: rgba(15,26,47,.85);
    color:#e5e7eb;
    cursor:pointer;
    font-size: 18px;
    line-height: 1;
    display:grid;
    place-items:center;
  }
  .popup-close:hover{ filter:brightness(1.08); }

  .popup-poster{
    width: 100%;
    aspect-ratio: 1 / 1;          /* 1:1 poster */
    background: #0b1327;
    outline: 1px solid #1f2b4a;
    display:block;
    object-fit: cover;
  }

  .popup-body{
    padding: 14px 14px 16px;
  }
  .popup-title{
    margin:0 0 6px;
    font-size: 16px;
    font-weight: 900;
    letter-spacing: .02em;
    color:#e5e7eb;
  }
  .popup-sub{
    margin:0 0 12px;
    color:#9ca3af;
    font-size: 13px;
  }

  .popup-cta{
    display:block;
    width:100%;
    text-align:center;
    padding: 12px 14px;
    border-radius: 12px;
    background:#EE4D2D;
    color:#fff;
    font-weight: 900;
    letter-spacing: .02em;
    border: 1px solid rgba(255,255,255,.12);
  }
  .popup-cta:hover{
    filter: brightness(1.05);
    box-shadow: 0 0 18px rgba(238,77,45,.35);
  }
  </style>
</head>
<body>
  <!-- NAVIGATION -->
  <nav class="nav">
    <div class="container nav-inner">
      <a class="brand" href="/"><span class="brand-dot"></span> <span>Mantapnet</span></a>
      <div class="nav-links">
        <a href="/">Home</a>
        <a href="https://shopee.com.my/vertex_world"
   target="_blank"
   rel="noopener noreferrer"
   class="new-shopee">
  New Shopee Account
</a>
        <a href="/sign-in-code">Get sign-in code</a>
        <a href="/household-code">Household Code</a>
      </div>
    </div>
  </nav>
  <!-- ===== First-visit Popup ===== -->
<div id="firstVisitPopup" class="popup-overlay" aria-hidden="true">
  <div class="popup-card" role="dialog" aria-modal="true" aria-label="Promotion">
    <button class="popup-close" id="popupCloseBtn" aria-label="Close">âœ•</button>

    <!-- 1:1 Poster -->
    <img class="popup-poster" src="/static/img/popup_poster.png" alt="Promo Poster">

    <div class="popup-body">
      <h3 class="popup-title">New Shopee Account is LIVE ðŸ”¥</h3>
      <p class="popup-sub">Click below to visit our new store.</p>

      <a id="popupShopeeBtn"
         class="popup-cta"
         href="https://shopee.com.my/vertex_world"
         target="_blank"
         rel="noopener noreferrer">
        Visit New Shopee Now
      </a>
    </div>
  </div>
</div>

  {% block topsection %}{% endblock %}

  <main class="container">
    {% block content %}{% endblock %}
  </main>

  <script>
  // Simple hero slider script (optional)
  (function(){
    const hero = document.getElementById('hero');
    if(!hero) return;
    const slides = [...hero.querySelectorAll('.hero-slide')];
    const dots   = [...hero.querySelectorAll('.dot')];
    const prev   = hero.querySelector('.hero-nav.prev');
    const next   = hero.querySelector('.hero-nav.next');

    let i = 0, timer = null, AUTOPLAY_MS = 3500;

    function go(n){
      slides[i].classList.remove('active');
      dots[i].classList.remove('active');
      i = (n + slides.length) % slides.length;
      slides[i].classList.add('active');
      dots[i].classList.add('active');
    }
    function nextSlide(){ go(i+1) }
    function prevSlide(){ go(i-1) }

    if(prev && next){
      prev.addEventListener('click', prevSlide);
      next.addEventListener('click', nextSlide);
    }
    dots.forEach(d => d.addEventListener('click', () => go(parseInt(d.dataset.to,10)||0)));

    function start(){ timer = setInterval(nextSlide, AUTOPLAY_MS) }
    function stop(){ if(timer){ clearInterval(timer); timer=null } }

    hero.addEventListener('mouseenter', stop);
    hero.addEventListener('mouseleave', start);
    start();
  })();
     (function(){
    const KEY = "mantapnet_popup_seen_session";
    const popup = document.getElementById("firstVisitPopup");
    const closeBtn = document.getElementById("popupCloseBtn");
    const shopeeBtn = document.getElementById("popupShopeeBtn");

    if(!popup || !closeBtn) return;

    function openPopup(){
      popup.classList.add("show");
      popup.setAttribute("aria-hidden", "false");
      document.body.style.overflow = "hidden";
    }

    function closePopup(){
      popup.classList.remove("show");
      popup.setAttribute("aria-hidden", "true");
      document.body.style.overflow = "";
    }

    // show once per session
    if(!sessionStorage.getItem(KEY)){
      openPopup();
      sessionStorage.setItem(KEY, "1");
    }

    closeBtn.addEventListener("click", closePopup);
    popup.addEventListener("click", function(e){
      if(e.target === popup) closePopup();
    });
    document.addEventListener("keydown", function(e){
      if(e.key === "Escape") closePopup();
    });

    // âœ… track click (non-blocking)
    if (shopeeBtn) {
      shopeeBtn.addEventListener("click", function(){
        // sendBeacon won't block opening new tab
        if (navigator.sendBeacon) {
          const blob = new Blob([JSON.stringify({})], {type: "application/json"});
          navigator.sendBeacon("/track/shopee-click", blob);
        } else {
          fetch("/track/shopee-click", { method: "POST" }).catch(()=>{});
        }
      });
    }
  })();
  </script>
</body>
</html>
